---
import { Icon } from 'astro-icon/components';
import type { Project } from '../../data/projects';
import Badge from '../Badge.astro';

interface Props {
  pj: Project;
}

const { pj } = Astro.props;
---

<div class="pj-root">
  <div class="pj-title-wrapper">
    {pj.repo && <a href={pj.repo} class="repo"><Icon name="simple-icons:github" title="GitHub" size="1.25em"/></a>}
    <h3>{pj.name}</h3>
    <span>
      {pj.technologies?.map(t => 
        <Badge t={t} />
      )}
    </span>
  </div>
  <p>
    {pj.description}
    {pj.url && <><br /><a href={pj.url} class="details-link">詳細...</a></>}
  </p>
</div>

<style>
h3 {
  display: inline;
  padding-right: 1rem;
}
.pj-title-wrapper {
  margin-bottom: 0.7em;
}
.repo {
  color: var(--font-color);
  z-index: 1;
  position: sticky;
}
.pj-root {
  position: relative;
}
a.details-link {
  display: block;
}
a.details-link::before {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
</style>
